{% extends 'accounts/dashboard.html' %}

{% block content %}
<h2 class="text-center">Employees</h2>

<!-- FILTER -->
 <div class="fill mb-3">
<a href="{% url 'employee_list' %}" class="btn btn-success">All</a>
<a href="{% url 'employee_list' %}?status=active" class="btn btn-success">Active</a>
<a href="{% url 'employee_list' %}?status=resigned" class="btn btn-success">Resigned</a>
 </div>


<div class="container-fluid">
    <table cellpadding="5" class="table table-striped table-bordered">
        <tr>
            <th>Name</th>
            <th>Company</th>
            <th>Team</th>
            <th>Role</th>
            <th>Date of Join</th>
            <th>Image</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>

        {% for emp in employees %}
        <tr>
            <td>{{ emp.name }}</td>
            <td>{{ emp.company.name }}</td>
            <td>{{ emp.team.name }}</td>
            <td>{{emp.role}}</td>
            <td>{{ emp.date_of_joining }}</td>
            <td>
                {% if emp.photo %}
                <img src="{{ emp.photo.url }}" width="60" alt="{{ emp.name }}">
                {% else %}
                <span>No Photo</span>
                {% endif %}


            </td>
            <td>{{ emp.status|title }}</td>
            

            <td>
                {% if request.user.role == "admin" %}
                <a href="{% url 'employee_edit' emp.id %}">Edit</a> |
                <a href="{% url 'employee_delete' emp.id %}" onclick="return confirm('Are you sure?');">
                    Resign
                </a>
                {% else %}
                -
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="11" style="text-align: center;">No employees found</td>
        </tr>
        {% endfor %}
    </table>
</div>



<br>
<a href="{% url 'dashboard' %}">Back to Dashboard</a>

{% endblock %}